Table USERS {
  ntuEmail varchar(63) [not null, unique]
  username varchar(80) [primary key]
  hashedPassword varchar(255) [not null]
}

Table RESTAURANTS {
  placeId varchar(300) [primary key]
  name varchar(200) [not null]
  address varchar(100) [not null]
  latitude double [not null]
  longitude double [not null]
}

Table RESTAURANT_TYPES {
  placeId varchar(300) [primary key]
  type varchar(20) [primary key]
}
Ref: RESTAURANT_TYPES.placeId > RESTAURANTS.placeId [delete: cascade, update: cascade]

Table REVIEWS {
  placeId varchar(300) [primary key]
  reviewerUsername varchar(80) [primary key]
  stars int [not null]
  content varchar(2000)
  expenditure int
  createdAt timestamp [not null, default: `now()`]
}
Ref: REVIEWS.placeId > RESTAURANTS.placeId [delete: cascade, update: cascade]
Ref: REVIEWS.reviewerUsername > USERS.username [delete: set null, update: cascade]

Table TAGS {
  tagId uuid [primary key, default: `gen_random_uuid()`]
  tagName varchar(50)
}

Table TAG_OWNERS {
  tagId uuid [primary key]
  ownerUsername varchar(80) [primary key]
}
Ref: TAG_OWNERS.tagId > TAGS.tagId [delete: cascade, update: cascade]
Ref: TAG_OWNERS.ownerUsername > USERS.username [delete: cascade, update: cascade]

Table TAGGED_RESTAURANTS {
  tagId uuid [primary key]
  placeId varchar(300) [primary key]
}
Ref: TAGGED_RESTAURANTS.tagId > TAGS.tagId [delete: cascade, update: cascade]
Ref: TAGGED_RESTAURANTS.placeId > RESTAURANTS.placeId [delete: cascade, update: cascade]

Table DATES {
  dateId uuid [primary key, default: `gen_random_uuid()`]
  occuredAt timestamp [not null]
}

Table DATE_PARTICIPANTS {
  dateId uuid [primary key]
  participantUsername varchar(80) [primary key]
}
Ref: DATE_PARTICIPANTS.dateId > DATES.dateId [delete: cascade, update: cascade]
Ref: DATE_PARTICIPANTS.participantUsername > USERS.username [delete: set null, update: cascade]

Table GLOBAL_MESSAGES {
  senderUsername varchar(80) [primary key]
  sentAt timestamp [primary key, default: `now()`]
  content varchar(1000) [not null]
}
Ref: GLOBAL_MESSAGES.senderUsername > USERS.username [delete: set null, update: cascade]

TABLE PRIVATE_MESSAGES {
  dateId uuid [primary key]
  senderUsername varchar(80) [primary key]
  sentAt timestamp [primary key, default: `now()`]
  content varchar(1000) [not null]
}
Ref: PRIVATE_MESSAGES.dateId > DATES.dateId [delete: cascade, update: cascade]
Ref: PRIVATE_MESSAGES.senderUsername > USERS.username [delete: set null, update: cascade]